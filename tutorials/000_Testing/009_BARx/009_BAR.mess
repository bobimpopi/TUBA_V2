# ------------------------------------------------------------------------------------------
# Impression du contenu du fichier de commandes à exécuter :
# ------------------------------------------------------------------------------------------

DEBUT(PAR_LOT='NON')
#--------------------------------------------------------------------------------------
#Read MED MESH File
#
#First command LIRE_MAILLAGE is used to read the MED mesh file generated by Salome.
#
#To Do:
#Enter the name of your Salome Mesh in b_format_med->NOM_MED
#--------------------------------------------------------------------------------------

MAIL0=LIRE_MAILLAGE(        
        FORMAT='MED',
        UNITE=20
);

#--------------------------------------------------------------------------------------
#Creates additional MESH parts - usually to be used for Discret elements like Springs and additional discret Masses
#--------------------------------------------------------------------------------------

MAIL=CREA_MAILLAGE(       
        MAILLAGE=MAIL0,
        CREA_POI1=  ( 
        ),
);

#--------------------------------------------------------------------------------------
#Groupes of Nodes (GROUP_NO) and Shells/Volumes (GROUP_MA) are defined which are later used to apply material, elements, forces and boudary conditions
#--------------------------------------------------------------------------------------

MAIL=DEFI_GROUP(            
        reuse =MAIL,
        MAILLAGE=MAIL,

        CREA_GROUP_NO=(
            _F(TOUT_GROUP_MA='OUI',),   #Creates a node group for each element
    
                
            _F(  NOM='GPOINTS',
                 UNION=(
                 'P0', 'P1', 'P2', 'P3', 
                ),
            ),
        ),
                    
        CREA_GROUP_MA=(
            _F(NOM='ALL',TOUT='OUI',),  #Creates a group for all element
                
            _F(
                NOM='GBAR',
                TYPE_MAILLE = '1D',
                UNION=(
                    'V0', 'V1', 'V2', 
                ),
            ),
        ),                 

);

#--------------------------------------------------------------------------------------
#Assigns a physical model to geometric entities.
#
#Here we assume that all the geometric entities (TOUT=OUI) are used for mechanical simulation (PHENOMENE=MECANIQUE) with 3D solid elements. 
#
#To Do (Optional):
#you can assign other physics or element types (like shells for example) to some of the elements by replacing TOUT=OUI in AFFE with  GROUP_MA = TheElementGroupYouWantToModel
#--------------------------------------------------------------------------------------

MODMECA=AFFE_MODELE(        
        MAILLAGE=MAIL,
        INFO=2,

        AFFE=(
            _F(
                GROUP_MA='GBAR',
                PHENOMENE = 'MECANIQUE',
                MODELISATION = 'BARRE',
            ),
        ),
);

#--------------------------------------------------------------------------------------
#Material properties
#
#To Do:
#Enter your material properties in this section. It is possible to add a function defining the material proberties
#if necessary Copy/Paste the DEFI_MATERIAU command to add a second material
#--------------------------------------------------------------------------------------


E_SS304=DEFI_FONCTION(NOM_PARA='TEMP',
              VALE=
              (
               -28.9,  197.7e3,
                37.8,  193.95e3,
                93.33, 189.6e3,
                148.9, 186.16e3,
                204.4, 182.0e3,
                260.0, 178.6e3,
                315.6, 174.4e3,
                398.9, 168577,
                482.2, 162027,
                565.6, 154443,
                648.9, 146169),
              PROL_DROITE='CONSTANT',   
              PROL_GAUCHE='CONSTANT',); 

NU_SS304=DEFI_FONCTION(NOM_PARA='TEMP',
              VALE=
              (20,0.3),
              PROL_DROITE='CONSTANT',   
              PROL_GAUCHE='CONSTANT',); 

A_SS304=DEFI_FONCTION(NOM_PARA='TEMP',
              VALE=
              (-28.9,  14.90e-6,
                37.8,  15.46e-6,
                93.33, 16.02e-6,
                148.9, 16.56e-6,
                204.4, 17.19e-6,
                260.0, 17.46e-6,
                315.6, 17.82e-6,
                343.3, 17.91e-6,
                371.1, 18e-6,
                398.9, 18.09e-6,
                426.7, 18.18e-6,
                454.4, 18.27e-6,
                621.1, 18.9e-6,
                648.9, 19.08e-6),
              PROL_DROITE='CONSTANT',   
              PROL_GAUCHE='CONSTANT',); 

R_SS304=DEFI_CONSTANTE(VALE=8.027e-09)

SS304=DEFI_MATERIAU(    
     ELAS_FO=_F(  E= E_SS304,
               NU=   NU_SS304,
               RHO=  R_SS304,
               ALPHA=   A_SS304,
               TEMP_DEF_ALPHA= 20 ,     
           ),
);

#--------------------------------------------------------------------------------------
#Boundary conditions
#
#This section defines the boundary conditions of the FEA, use DDL_IMPO or LIASION_OBLIQUE on selected groups to impose displacements 
#--------------------------------------------------------------------------------------

BLOCAGE=AFFE_CHAR_MECA(       
        MODELE=MODMECA,

        DDL_IMPO=(   
        ),
               
        DDL_POUTRE=(  
        ),

        LIAISON_ELEM=(
        ),
                  
        LIAISON_GROUP=(
        ),
                  
        LIAISON_UNIF=(
        ),   
        
        LIAISON_SOLIDE=(
        ),
                  
        LIAISON_OBLIQUE=(
            _F(GROUP_NO='P0',
                   DX=0,
                   DY=0,
                   DZ=0,
                   ANGL_NAUT=(0.0,0.0,0),
            ),
            _F(GROUP_NO='P1',
                   DX=0,
                   DY=0,
                   DZ=0,
                   ANGL_NAUT=(0.0,0.0,0),
            ),
            _F(GROUP_NO='P2',
                   DX=0,
                   DY=0,
                   DZ=0,
                   ANGL_NAUT=(0.0,0.0,0),
            ),
        ),
        
        LIAISON_MAIL=(
        ),
                    
                                      
);



#--------------------------------------------------------------------------------------
#Maps element types (mass, beam, shell etc.) onto 0D, 1D, 2D and 3D mesh.
#--------------------------------------------------------------------------------------

CARAELEM=AFFE_CARA_ELEM(    
        MODELE=MODMECA,

        BARRE=(
            _F(
                GROUP_MA=(
                   'V0', 'V1', 'V2', 
                ),
                SECTION ='CERCLE',
                CARA=('R','EP',),
                VALE=(35.0, 4.0),
            ),
        ),

        CABLE=(
        ),

        POUTRE=(
        ),
                                                                                               
                  
        DISCRET=(

        ),
                  
        ORIENTATION=(
        ),                                    
);




#-------------------------------------------------------------------------------
# This section specifies external mechanical loads (imposed forces at nodes and line elements)
#-------------------------------------------------------------------------------
LOAD=AFFE_CHAR_MECA(      
        MODELE=MODMECA,

        FORCE_NODALE=(
        ),

        PESANTEUR=(
            _F( GRAVITE=9800,
                DIRECTION=(0.0,0.0,-1.0),
            ),
        ),

        FORCE_POUTRE=(
        ),
        
        FORCE_TUYAU=(
        ),

);


#-------------------------------------------------------------------------------
# Applies the defined Temperature fields to the different mesh groups
#-------------------------------------------------------------------------------
CHA_TEMP=CREA_CHAMP(
     OPERATION='AFFE',
     TYPE_CHAM='NOEU_TEMP_R',
     MODELE=MODMECA,
     AFFE=(
            _F( TOUT='OUI',
                NOM_CMP='TEMP',
                VALE=20,
                ),

            _F(
               GROUP_MA=(
                'V0', 'V1', 'V2', 
               ),
               NOM_CMP='TEMP',
               VALE=550,
            ),
    ),
);




#-------------------------------------------------------------------------------
# Creates a dummy pressure filed for TUBE-elememts
#-------------------------------------------------------------------------------
               

#CHA_PRES=CREA_CHAMP(
#     OPERATION='AFFE',         #assigns a value on nodes or meshes
#     TYPE_CHAM='NOEU_TEMP_R',
#     MODELE=MODMECA,
#     AFFE=(
#            _F( TOUT='OUI',
#                NOM_CMP='TEMP',
#                VALE=0,
#                ),
#               ##Pressure_Field

#    ),
#);
#IMPR_RESU(FORMAT='MED',RESU=_F(CHAM_GD=CHA_PRES));



#-------------------------------------------------------------------------------
# Applies the defined materials to the different meshgroups
#-------------------------------------------------------------------------------


CH_MAT=AFFE_MATERIAU(        
    MAILLAGE=MAIL,

    AFFE=(
        _F(
            GROUP_MA=(
                'V0', 'V1', 'V2', 
            ),
            MATER=SS304,
        ),
    ),

    # Applies temperature field CHA_TEMP, VALE_REF is the reference temperature where thermal dilatation is 0
    AFFE_VARC=(  
            _F( TOUT='OUI',
                NOM_VARC='TEMP',
                CHAM_GD=CHA_TEMP,
                VALE_REF=20,      
           ),
    ),        

);








#------------------------------------------------------------------------------
# SIMULATION STEP
#------------------------------------------------------------------------------





# Run the simulation
#---------------------------------------------------                       
RESU=MECA_STATIQUE(
     MODELE=MODMECA,
     CHAM_MATER=CH_MAT,
     CARA_ELEM=CARAELEM,
     INST=1,
     EXCIT=(
         _F(   CHARGE=BLOCAGE
          ),
         _F(   CHARGE=LOAD,
          ),

     ),
);


# Calculate Reaction Forces from obtained results
#---------------------------------------------------

RESU=CALC_CHAMP(reuse =RESU,
     RESULTAT=RESU,
     FORCE=('REAC_NODA','FORC_NODA'),
);


# PRINT RESULTS  to  .MED  ->  Salome
#---------------------------------------------------    
   
IMPR_RESU(UNITE=80,FORMAT='MED',RESU=(
        _F(RESULTAT=RESU),
        _F(CHAM_GD=CHA_TEMP)

        ,
));
IMPR_RESU(UNITE=80, FORMAT='MED', CONCEPT=_F(CARA_ELEM=CARAELEM, REPERE_LOCAL='ELNO', MODELE=MODMECA), )


#Results(Deformation, Reaction Forces and Forces) at specific nodes are saved in a txt-file
#-----------------------------------------------------------------------------------------             
Tab_DEPL=CREA_TABLE(RESU=_F(RESULTAT=RESU,
						 GROUP_NO='GPOINTS', #'ALL'
						 NOM_CHAM='DEPL',
						 NOM_CMP=('DX','DY','DZ'),
						 PRECISION=0.1,   
						 ),
                );
Tab_REAC=CREA_TABLE(RESU=_F(RESULTAT=RESU,
						 GROUP_NO='GPOINTS', #'ALL'
						 NOM_CHAM='REAC_NODA',
						 NOM_CMP=('DX','DY','DZ'),
						 PRECISION=0.1,   
						 ),
                );    
Tab_FORC=CREA_TABLE(RESU=_F(RESULTAT=RESU,
						 GROUP_NO='GPOINTS',    #'ALL'
						 NOM_CHAM='FORC_NODA',
						 NOM_CMP=('DX','DY','DZ'),
						 PRECISION=0.1,                         
						 ),
                );    
    
var_depl=Tab_DEPL.EXTR_TABLE();
var_reac=Tab_REAC.EXTR_TABLE();
var_forc=Tab_FORC.EXTR_TABLE();                            

if var_depl['COOR_Z']:
    var_depl=var_depl['NOM_CHAM','NOEUD','COOR_X','COOR_Y','COOR_Z','DX','DY','DZ']
    var_reac=var_reac['NOM_CHAM','NOEUD','COOR_X','COOR_Y','COOR_Z','DX','DY','DZ']                        
    var_forc=var_forc['NOM_CHAM','NOEUD','COOR_X','COOR_Y','COOR_Z','DX','DY','DZ']
else:
    var_depl=var_depl['NOM_CHAM','NOEUD','COOR_X','COOR_Y','DX','DY','DZ']
    var_reac=var_reac['NOM_CHAM','NOEUD','COOR_X','COOR_Y','DX','DY','DZ']                        
    var_forc=var_forc['NOM_CHAM','NOEUD','COOR_X','COOR_Y','DX','DY','DZ']    
                         
#mass=POST_ELEM(
#    RESULTAT =RESU ,
#    MASS_INER=_F(TOUT='OUI' ),
#    TITRE= 'mass',
#    ) ;
#var_mass=mass.EXTR_TABLE();
#var_mass=var_mass['LIEU','MASSE']        


                                  
import os
current_directory ='/home/jangeorg/TUBA/tutorials/000_Testing/009_BAR'

OUTPUT_FILE='/009_BAR_Tables.output' # Filename of the output file
fileOutput = current_directory + OUTPUT_FILE # Define output file                    
                    
try:
   f = open(fileOutput, 'w')    #'a' opens the file for appending , 'w' opens file and erases
   f.write(str(var_depl)+str(var_reac)+str(var_forc)+'\n'+'Total Mass in tons \n'+str(var_mass))
   f.close()
   
except:
   print("Error")

        




# ------------------------------------------------------------------------------------------

  Ouverture en écriture du fichier ./vola.1
                                                                                
                                                                                
              -- CODE_ASTER -- VERSION : EXPLOITATION (stable) --               
                                                                                
                     Version 13.4.0 modifiée le 24/10/2017                      
                     révision d3b9d70df6c4 - branche 'v13'                      
                         Copyright EDF R&D 1991 - 2018                          
                                                                                
                    Exécution du : Wed Jan 10 17:19:34 2018                     
                    Nom de la machine : jangeorg-VirtualBox                     
                              Architecture : 64bit                              
                          Type de processeur : x86_64                           
      Système d'exploitation : Linux debian stretch/sid  4.4.0-101-generic      
                        Langue des messages : en (UTF-8)                        
                                                                                
                           Version de Python : 2.7.10                           
                            Version de NumPy : 1.9.2                            
                           Parallélisme MPI : inactif                           
                          Parallélisme OpenMP : actif                           
                        Nombre de processus utilisés : 2                        
                     Version de la librairie HDF5 : 1.8.14                      
                      Version de la librairie MED : 3.2.1                       
                     Version de la librairie MFront : 3.0.0                     
                     Version de la librairie MUMPS : 5.1.1                      
                        Librairie PETSc : non disponible                        
                     Version de la librairie SCOTCH : 6.0.4                     

                  Mémoire limite pour l'exécution : 2000.00 Mo                  
                   consommée par l'initialisation : 549.52 Mo                   
                  par les objets du jeu de commandes : 0.00 Mo                  
                 reste pour l'allocation dynamique : 1448.80 Mo                 
                Taille limite des fichiers d'échange : 12.00 Go                 
                                                                                

  # ------------------------------------------------------------------------------------------
  # Commande No :  0001            Concept de type : -
  # ------------------------------------------------------------------------------------------
  DEBUT(PAR_LOT='NON',
        INFO=1,
        IMPR_MACRO='NON',
        DEBUG=_F(JEVEUX='NON',
                 JXVERI='NON',
                 HIST_ETAPE='NON',
                 SDVERI='NON',),
        MEMOIRE=_F(TAILLE_BLOC=800.0,
                   TAILLE_GROUP_ELEM=1000,),
        RESERVE_CPU=_F(BORNE=900,),
        MESURE_TEMPS=_F(MOYENNE='NON',
                        NIVE_DETAIL=1,),
        )

   
   !------------------------------------------------------------------------------------!
   ! <A> <SUPERVIS_1>                                                                   !
   !                                                                                    !
   !  L'utilisation du mot-clé PAR_LOT='NON' permet d'accéder en lecture et en écriture !
   !  au contenu des concepts Aster. De ce fait, votre étude est exclue du périmètre    !
   !  qualifié de Code_Aster puisque toutes ses étapes ne peuvent être certifiées.      !
   !                                                                                    !
   !  Conseils :                                                                        !
   !    - Il n'y a pas particulièrement de risque de résultat faux... sauf si votre     !
   !      programmation l'introduit.                                                    !
   !    - Distinguez le calcul lui-même (qui doit sans doute passer en PAR_LOT='OUI')   !
   !      des post-traitements (qui nécessiteraient le mode PAR_LOT='NON') qui peuvent  !
   !      être réalisés en POURSUITE.                                                   !
   !                                                                                    !
   !                                                                                    !
   ! Ceci est une alarme. Si vous ne comprenez pas le sens de cette                     !
   ! alarme, vous pouvez obtenir des résultats inattendus !                             !
   !------------------------------------------------------------------------------------!
   

  Valeur initiale du temps CPU maximum =   9000000 secondes
  Valeur du temps CPU maximum passé aux commandes =   8999100 secondes
  Réserve CPU prévue = 900 secondes

  Ouverture en écriture du fichier ./glob.1

  Ouverture en écriture du fichier ./vola.1

  Ouverture en lecture du fichier /home/jangeorg/salome_meca/V2017.0.2/tools/Code_aster_stable-v134_smeca/lib/aster/elem.1

     Nom de la base                          :  ELEMBASE
     Créée avec la version                   :  13.04.00
     Nombre d'enregistrements utilisés       :  44
     Nombre d'enregistrements maximum        :  512
     Longueur d'enregistrement (octets)      :  819200
     Nombre d'identificateurs utilisés       :  123
     Taille maximum du répertoire            :  300
     Pourcentage d'utilisation du répertoire :  41 %

  Ouverture en lecture du fichier /home/jangeorg/salome_meca/V2017.0.2/tools/Code_aster_stable-v134_smeca/lib/aster/elem.1


     Nom de la base                          :  ELEMBASE
     Nombre d'enregistrements utilisés       :  44
     Nombre d'enregistrements maximum        :  512
     Longueur d'enregistrement (octets)      :  819200
     Nombre total d'accès en lecture         :  62
     Volume des accès en lecture             :         48.44 Mo.
     Nombre total d'accès en écriture        :  0
     Volume des accès en écriture            :          0.00 Mo.
     Nombre d'identificateurs utilisés       :  123
     Taille maximum du répertoire            :  300
     Pourcentage d'utilisation du répertoire :  41 %

  Relecture des catalogues des éléments faite.

  Fin de lecture (durée  0.072237  s.) 
  # Mémoire (Mo) :   596.25 /   588.57 /    44.66 /    23.16 (VmPeak / VmSize / Optimum / Minimum)
  # Fin commande No : 0001   user+syst:        0.09s (syst:        0.06s, elaps:        0.11s)
  # ------------------------------------------------------------------------------------------

  # ------------------------------------------------------------------------------------------
  # Commande No :  0002            Concept de type : maillage_sdaster
  # ------------------------------------------------------------------------------------------
  MAIL0 = LIRE_MAILLAGE(UNITE=20,
                        FORMAT='MED',
                        INFO_MED=1,
                        INFO=1,
                        VERI_MAIL=_F(APLAT=1.E-3,
                                     VERIF='OUI',),
                        )

Vérification du maillage.

------------ MAILLAGE MAIL0    - IMPRESSIONS NIVEAU  1 ------------

ME-10-JANV-2018 17:19:34                                                        

NOMBRE DE NOEUDS                           3

NOMBRE DE MAILLES                          3
                              SEG2                    3

NOMBRE DE GROUPES DE NOEUDS                4
                              P1                                   1
                              P2                                   1
                              P0                                   1
                              P3                                   1

NOMBRE DE GROUPES DE MAILLES               3
                              V0                                   1
                              V1                                   1
                              V2                                   1

--------------------------------------------------------------------------------

  # Mémoire (Mo) :   596.25 /   589.23 /    44.66 /    23.16 (VmPeak / VmSize / Optimum / Minimum)
  # Fin commande No : 0002   user+syst:        0.04s (syst:        0.00s, elaps:        0.04s)
  # ------------------------------------------------------------------------------------------

  # ------------------------------------------------------------------------------------------
  # Commande No :  0003            Concept de type : maillage_sdaster
  # ------------------------------------------------------------------------------------------
  MAIL = CREA_MAILLAGE(MAILLAGE=MAIL0,
                       INFO=1,)


------------ MAILLAGE MAIL     - IMPRESSIONS NIVEAU  1 ------------

ASTER 13.04.00 CONCEPT MAIL CALCULE LE 10/01/2018 A 17:19:34 DE TYPE            
MAILLAGE_SDASTER                                                                

NOMBRE DE NOEUDS                           3

NOMBRE DE MAILLES                          3
                              SEG2                    3

NOMBRE DE GROUPES DE NOEUDS                4
                              P1                                   1
                              P2                                   1
                              P0                                   1
                              P3                                   1

NOMBRE DE GROUPES DE MAILLES               3
                              V0                                   1
                              V1                                   1
                              V2                                   1

--------------------------------------------------------------------------------

  # Mémoire (Mo) :   596.25 /   589.23 /    44.66 /    23.16 (VmPeak / VmSize / Optimum / Minimum)
  # Fin commande No : 0003   user+syst:        0.01s (syst:        0.00s, elaps:        0.00s)
  # ------------------------------------------------------------------------------------------

  # ------------------------------------------------------------------------------------------
  # Commande No :  0004            Concept de type : maillage_sdaster
  # ------------------------------------------------------------------------------------------
  MAIL = DEFI_GROUP(reuse=MAIL,
                    MAILLAGE=MAIL,
                    CREA_GROUP_NO=(_F(TOUT_GROUP_MA='OUI',),
                                   _F(UNION=('P0', 'P1', 'P2', 'P3'),
                                      NOM='GPOINTS',),
                                   ),
                    CREA_GROUP_MA=(_F(NOM='ALL',
                                      TOUT='OUI',
                                      TYPE_MAILLE='TOUT',),
                                   _F(NOM='GBAR',
                                      UNION=('V0', 'V1', 'V2'),
                                      TYPE_MAILLE='1D',),
                                   ),
                    ALARME='OUI',)



NOMBRE  DE GROUPES DE MAILLES CREES :      2
=============================================

               ------------------------------------------------------
               !         NOM DU GROUPE         ! NBRE DE MAILLES DU !
               !            MAILLES            !     GROUPE_MA      !
               ------------------------------------------------------
               !  ALL                          !         3          !
               !  GBAR                         !         3          !
               ------------------------------------------------------



NOMBRE  DE GROUPES DE NOEUDS CREES :      6
=======================================

               ------------------------------------------------------
               !         NOM DU GROUPE         ! NBRE DE NOEUDS DU  !
               !            NOEUDS             !      GROUPE_NO     !
               ------------------------------------------------------
               !  V0                           !         2          !
               !  V1                           !         2          !
               !  V2                           !         2          !
               !  ALL                          !         3          !
               !  GBAR                         !         3          !
               !  GPOINTS                      !         3          !
               ------------------------------------------------------

  # Mémoire (Mo) :   596.25 /   589.38 /    44.66 /    23.16 (VmPeak / VmSize / Optimum / Minimum)
  # Fin commande No : 0004   user+syst:        0.02s (syst:        0.00s, elaps:        0.01s)
  # ------------------------------------------------------------------------------------------

  # ------------------------------------------------------------------------------------------
  # Commande No :  0005            Concept de type : modele_sdaster
  # ------------------------------------------------------------------------------------------
  MODMECA = AFFE_MODELE(INFO=2,
                        MAILLAGE=MAIL,
                        AFFE=_F(GROUP_MA=('GBAR', ),
                                PHENOMENE='MECANIQUE',
                                MODELISATION=('BARRE', ),),
                        VERI_JACOBIEN='OUI',
                        DISTRIBUTION=_F(PARTITIONNEUR='METIS',
                                        METHODE='SOUS_DOMAINE',),
                        )


Sur les 3 mailles du maillage MAIL, on a demandé l'affectation de 3, on a pu en affecter 3
 Modélisation     Type maille  Élément fini     Nombre
 BARRE            SEG2         MECA_BARRE       3
Liste des mailles affectées pour la modélisation:
 BARRE            SEG2         MECA_BARRE       3
M1       M2       M3                                                   
#2      Calculs elementaires et assemblages               CPU (USER+SYST/SYST/ELAPS):      0.00      0.00      0.00
  # Mémoire (Mo) :   622.74 /   622.74 /    44.66 /    33.91 (VmPeak / VmSize / Optimum / Minimum)
  # Fin commande No : 0005   user+syst:        0.03s (syst:        0.01s, elaps:        0.03s)
  # ------------------------------------------------------------------------------------------

  # ------------------------------------------------------------------------------------------
  # Commande No :  0006            Concept de type : fonction_sdaster
  # ------------------------------------------------------------------------------------------
  E_SS304 = DEFI_FONCTION(PROL_DROITE='CONSTANT',
                          VALE=(-28.9, 1.97700E5, 37.8, 1.93950E5, 93.33, 1.89600E5, 148.9, 1.86160E5, 204.4, 1.82000E5, 260.0, 1.78600E5, 315.6, 1.74400E5, 398.9, 168577, 482.2, 162027, 565.6, 154443, 648.9, 146169),
                          NOM_PARA='TEMP',
                          PROL_GAUCHE='CONSTANT',
                          INFO=1,
                          INTERPOL=('LIN', ),
                          NOM_RESU='TOUTRESU',
                          VERIF='CROISSANT',)

  # Mémoire (Mo) :   622.74 /   622.74 /    44.66 /    33.91 (VmPeak / VmSize / Optimum / Minimum)
  # Fin commande No : 0006   user+syst:        0.01s (syst:        0.00s, elaps:        0.00s)
  # ------------------------------------------------------------------------------------------

  # ------------------------------------------------------------------------------------------
  # Commande No :  0007            Concept de type : fonction_sdaster
  # ------------------------------------------------------------------------------------------
  NU_SS304 = DEFI_FONCTION(PROL_DROITE='CONSTANT',
                           VALE=(20, 0.3),
                           NOM_PARA='TEMP',
                           PROL_GAUCHE='CONSTANT',
                           INFO=1,
                           INTERPOL=('LIN', ),
                           NOM_RESU='TOUTRESU',
                           VERIF='CROISSANT',)

  # Mémoire (Mo) :   622.74 /   622.74 /    44.66 /    33.91 (VmPeak / VmSize / Optimum / Minimum)
  # Fin commande No : 0007   user+syst:        0.02s (syst:        0.01s, elaps:        0.01s)
  # ------------------------------------------------------------------------------------------

  # ------------------------------------------------------------------------------------------
  # Commande No :  0008            Concept de type : fonction_sdaster
  # ------------------------------------------------------------------------------------------
  A_SS304 = DEFI_FONCTION(PROL_DROITE='CONSTANT',
                          VALE=(-28.9, 1.49E-05, 37.8, 1.546E-05, 93.33, 1.602E-05, 148.9, 1.656E-05, 204.4, 1.719E-05, 260.0, 1.746E-05, 315.6, 1.782E-05, 343.3, 1.791E-05, 371.1, 1.8E-05, 398.9, 1.809E-05, 426.7, 1.818E-05, 454.4, 1.827E-05, 621.1, 1.89E-05, 648.9, 1.908E-05),
                          NOM_PARA='TEMP',
                          PROL_GAUCHE='CONSTANT',
                          INFO=1,
                          INTERPOL=('LIN', ),
                          NOM_RESU='TOUTRESU',
                          VERIF='CROISSANT',)

  # Mémoire (Mo) :   622.74 /   622.74 /    44.66 /    33.91 (VmPeak / VmSize / Optimum / Minimum)
  # Fin commande No : 0008   user+syst:        0.00s (syst:        0.00s, elaps:        0.01s)
  # ------------------------------------------------------------------------------------------

  # ------------------------------------------------------------------------------------------
  # Commande No :  0009            Concept de type : fonction_sdaster
  # ------------------------------------------------------------------------------------------
  R_SS304 = DEFI_CONSTANTE(VALE=8.027E-09,
                           NOM_RESU='TOUTRESU',)

  # Mémoire (Mo) :   622.74 /   622.74 /    44.66 /    33.91 (VmPeak / VmSize / Optimum / Minimum)
  # Fin commande No : 0009   user+syst:        0.01s (syst:        0.00s, elaps:        0.00s)
  # ------------------------------------------------------------------------------------------

  # ------------------------------------------------------------------------------------------
  # Commande No :  0010            Concept de type : mater_sdaster
  # ------------------------------------------------------------------------------------------
  SS304 = DEFI_MATERIAU(ELAS_FO=_F(E=E_SS304,
                                   RHO=R_SS304,
                                   ALPHA=A_SS304,
                                   NU=NU_SS304,
                                   TEMP_DEF_ALPHA=20,
                                   COEF_AMOR=1.0,
                                   B_ENDOGE=0.0,
                                   PRECISION=1.0,
                                   K_DESSIC=0.0,),
                        INFO=1,)


 MATERIAU : SS304   
 RELATION DE COMPORTEMENT: ELAS                            


  # Mémoire (Mo) :   622.74 /   622.74 /    44.66 /    33.91 (VmPeak / VmSize / Optimum / Minimum)
  # Fin commande No : 0010   user+syst:        0.02s (syst:        0.00s, elaps:        0.02s)
  # ------------------------------------------------------------------------------------------

  # ------------------------------------------------------------------------------------------
  # Commande No :  0011            Concept de type : char_meca
  # ------------------------------------------------------------------------------------------
  BLOCAGE = AFFE_CHAR_MECA(MODELE=MODMECA,
                           LIAISON_OBLIQUE=(_F(GROUP_NO=('P0', ),
                                               DZ=0,
                                               DX=0,
                                               DY=0,
                                               ANGL_NAUT=(0.0, 0.0, 0),),
                                            _F(GROUP_NO=('P1', ),
                                               DZ=0,
                                               DX=0,
                                               DY=0,
                                               ANGL_NAUT=(0.0, 0.0, 0),),
                                            _F(GROUP_NO=('P2', ),
                                               DZ=0,
                                               DX=0,
                                               DY=0,
                                               ANGL_NAUT=(0.0, 0.0, 0),),
                                            ),
                           INFO=1,
                           VERI_NORM='OUI',)

  # Mémoire (Mo) :   623.03 /   622.87 /    44.66 /    33.91 (VmPeak / VmSize / Optimum / Minimum)
  # Fin commande No : 0011   user+syst:        0.02s (syst:        0.00s, elaps:        0.03s)
  # ------------------------------------------------------------------------------------------

  # ------------------------------------------------------------------------------------------
  # Commande No :  0012            Concept de type : cara_elem
  # ------------------------------------------------------------------------------------------
  CARAELEM = AFFE_CARA_ELEM(MODELE=MODMECA,
                            BARRE=_F(GROUP_MA=('V0', 'V1', 'V2'),
                                     SECTION='CERCLE',
                                     CARA=('R', 'EP'),
                                     VALE=(35.0, 4.0),),
                            INFO=1,)


     LE MODELE MODMECA  CONTIENT : 
                                        3 ELEMENT(S) BARRE           
#2      Calculs elementaires et assemblages               CPU (USER+SYST/SYST/ELAPS):      0.00      0.00      0.00
  # Mémoire (Mo) :   623.41 /   623.38 /    44.66 /    33.91 (VmPeak / VmSize / Optimum / Minimum)
  # Fin commande No : 0012   user+syst:        0.02s (syst:        0.01s, elaps:        0.01s)
  # ------------------------------------------------------------------------------------------

  # ------------------------------------------------------------------------------------------
  # Commande No :  0014            Concept de type : char_meca
  # ------------------------------------------------------------------------------------------
  LOAD = AFFE_CHAR_MECA(MODELE=MODMECA,
                        PESANTEUR=_F(GRAVITE=9800,
                                     DIRECTION=(0.0, 0.0, -1.0),),
                        INFO=1,
                        VERI_NORM='OUI',)

  # Mémoire (Mo) :   623.41 /   623.38 /    44.66 /    33.91 (VmPeak / VmSize / Optimum / Minimum)
  # Fin commande No : 0014   user+syst:        0.01s (syst:        0.00s, elaps:        0.01s)
  # ------------------------------------------------------------------------------------------

  # ------------------------------------------------------------------------------------------
  # Commande No :  0015            Concept de type : cham_no_sdaster
  # ------------------------------------------------------------------------------------------
  CHA_TEMP = CREA_CHAMP(TYPE_CHAM='NOEU_TEMP_R',
                        OPERATION='AFFE',
                        MODELE=MODMECA,
                        AFFE=(_F(NOM_CMP=('TEMP', ),
                                 VALE=(20, ),
                                 TOUT='OUI',),
                              _F(GROUP_MA=('V0', 'V1', 'V2'),
                                 NOM_CMP=('TEMP', ),
                                 VALE=(550, ),),
                              ),
                        INFO=1,)

  # Mémoire (Mo) :   623.53 /   623.53 /    44.66 /    33.91 (VmPeak / VmSize / Optimum / Minimum)
  # Fin commande No : 0015   user+syst:        0.01s (syst:        0.00s, elaps:        0.02s)
  # ------------------------------------------------------------------------------------------

  # ------------------------------------------------------------------------------------------
  # Commande No :  0016            Concept de type : cham_mater
  # ------------------------------------------------------------------------------------------
  CH_MAT = AFFE_MATERIAU(MAILLAGE=MAIL,
                         AFFE_VARC=_F(NOM_VARC='TEMP',
                                      CHAM_GD=CHA_TEMP,
                                      TOUT='OUI',
                                      VALE_REF=20,),
                         AFFE=_F(MATER=(SS304, ),
                                 GROUP_MA=('V0', 'V1', 'V2'),),
                         INFO=1,
                         )

  # Mémoire (Mo) :   623.53 /   623.53 /    44.66 /    33.91 (VmPeak / VmSize / Optimum / Minimum)
  # Fin commande No : 0016   user+syst:        0.04s (syst:        0.01s, elaps:        0.03s)
  # ------------------------------------------------------------------------------------------

  # ------------------------------------------------------------------------------------------
  # Commande No :  0017            Concept de type : evol_elas
  # ------------------------------------------------------------------------------------------
  RESU = MECA_STATIQUE(INST=1,
                       CARA_ELEM=CARAELEM,
                       CHAM_MATER=CH_MAT,
                       MODELE=MODMECA,
                       EXCIT=(_F(CHARGE=BLOCAGE,
                                 TYPE_CHARGE='FIXE_CSTE',),
                              _F(CHARGE=LOAD,
                                 TYPE_CHARGE='FIXE_CSTE',),
                              ),
                       INFO=1,
                       OPTION='SIEF_ELGA',
                       SOLVEUR=_F(RENUM='METIS',
                                  STOP_SINGULIER='OUI',
                                  ELIM_LAGR='NON',
                                  NPREC=8,
                                  METHODE='MULT_FRONT',),
                       )


Le système linéaire à résoudre a 27 degrés de liberté:
   - 9 sont des degrés de liberté physiques
     (ils sont portés par 3 noeuds du maillage)
   - 18 sont les couples de paramètres de Lagrange associés
     aux 9 relations linéaires dualisées.

La matrice est de taille 27 équations.
Elle contient 126 termes non nuls si elle est symétrique et 225 termes non nuls si elle n'est pas symétrique.
Soit un taux de remplissage de  30.864 %.
   CHAMP STOCKE :             DEPL INSTANT :  1.00000E+00  NUMERO D'ORDRE :     1
#1      Resolution des systemes lineaires                 CPU (USER+SYST/SYST/ELAPS):      0.02      0.00      0.01
#2      Calculs elementaires et assemblages               CPU (USER+SYST/SYST/ELAPS):      0.01      0.00      0.01
  # Mémoire (Mo) :   635.48 /   635.19 /    44.66 /    33.91 (VmPeak / VmSize / Optimum / Minimum)
  # Fin commande No : 0017   user+syst:        0.07s (syst:        0.01s, elaps:        0.06s)
  # ------------------------------------------------------------------------------------------

  # ------------------------------------------------------------------------------------------
  # Commande No :  0018            Concept de type : evol_elas
  # ------------------------------------------------------------------------------------------
  RESU = CALC_CHAMP(reuse=RESU,
                    FORCE=('REAC_NODA', 'FORC_NODA'),
                    RESULTAT=RESU,
                    PRECISION=1.E-06,
                    INFO=1,
                    CRITERE='RELATIF',)


Le système linéaire à résoudre a 27 degrés de liberté:
   - 9 sont des degrés de liberté physiques
     (ils sont portés par 3 noeuds du maillage)
   - 18 sont les couples de paramètres de Lagrange associés
     aux 9 relations linéaires dualisées.
#2      Calculs elementaires et assemblages               CPU (USER+SYST/SYST/ELAPS):      0.02      0.01      0.02
  # Mémoire (Mo) :   635.48 /   635.19 /    44.66 /    33.91 (VmPeak / VmSize / Optimum / Minimum)
  # Fin commande No : 0018   user+syst:        0.11s (syst:        0.05s, elaps:        0.06s)
  # ------------------------------------------------------------------------------------------

  # ------------------------------------------------------------------------------------------
  # Commande No :  0019            Concept de type : -
  # ------------------------------------------------------------------------------------------
  IMPR_RESU(FORMAT='MED',
            RESU=(_F(RESULTAT=RESU,
                     INFO_MAILLAGE='NON',
                     IMPR_NOM_VARI='OUI',),
                  _F(CHAM_GD=CHA_TEMP,
                     INFO_MAILLAGE='NON',
                     IMPR_NOM_VARI='OUI',),
                  ),
            UNITE=80,
            INFO=1,
            PROC0='OUI',)

  # Mémoire (Mo) :   635.70 /   635.19 /    44.66 /    33.91 (VmPeak / VmSize / Optimum / Minimum)
  # Fin commande No : 0019   user+syst:        0.18s (syst:        0.10s, elaps:        0.14s)
  # ------------------------------------------------------------------------------------------

  # ------------------------------------------------------------------------------------------
  # Commande No :  0020            Concept de type : -
  # ------------------------------------------------------------------------------------------
  IMPR_RESU(FORMAT='MED',
            CONCEPT=_F(CARA_ELEM=CARAELEM,
                       REPERE_LOCAL='ELNO',
                       MODELE=MODMECA,),
            UNITE=80,
            INFO=1,
            PROC0='OUI',)

#2      Calculs elementaires et assemblages               CPU (USER+SYST/SYST/ELAPS):      0.00      0.00      0.00
  # Mémoire (Mo) :   635.70 /   635.19 /    44.66 /    33.91 (VmPeak / VmSize / Optimum / Minimum)
  # Fin commande No : 0020   user+syst:        0.07s (syst:        0.04s, elaps:        0.04s)
  # ------------------------------------------------------------------------------------------

  # ------------------------------------------------------------------------------------------
  # Commande No :  0021            Concept de type : table_sdaster
  # ------------------------------------------------------------------------------------------
  Tab_DEPL = CREA_TABLE(RESU=_F(NOM_CMP=('DX', 'DY', 'DZ'),
                                GROUP_NO=('GPOINTS', ),
                                RESULTAT=RESU,
                                NOM_CHAM='DEPL',
                                PRECISION=0.1,
                                CRITERE='RELATIF',),
                        TYPE_TABLE='TABLE',)

  # Mémoire (Mo) :   635.70 /   635.19 /    44.66 /    33.91 (VmPeak / VmSize / Optimum / Minimum)
  # Fin commande No : 0021   user+syst:        0.01s (syst:        0.01s, elaps:        0.01s)
  # ------------------------------------------------------------------------------------------

  # ------------------------------------------------------------------------------------------
  # Commande No :  0022            Concept de type : table_sdaster
  # ------------------------------------------------------------------------------------------
  Tab_REAC = CREA_TABLE(RESU=_F(NOM_CMP=('DX', 'DY', 'DZ'),
                                GROUP_NO=('GPOINTS', ),
                                RESULTAT=RESU,
                                NOM_CHAM='REAC_NODA',
                                PRECISION=0.1,
                                CRITERE='RELATIF',),
                        TYPE_TABLE='TABLE',)

  # Mémoire (Mo) :   635.70 /   635.19 /    44.66 /    33.91 (VmPeak / VmSize / Optimum / Minimum)
  # Fin commande No : 0022   user+syst:        0.01s (syst:        0.01s, elaps:        0.00s)
  # ------------------------------------------------------------------------------------------

  # ------------------------------------------------------------------------------------------
  # Commande No :  0023            Concept de type : table_sdaster
  # ------------------------------------------------------------------------------------------
  Tab_FORC = CREA_TABLE(RESU=_F(NOM_CMP=('DX', 'DY', 'DZ'),
                                GROUP_NO=('GPOINTS', ),
                                RESULTAT=RESU,
                                NOM_CHAM='FORC_NODA',
                                PRECISION=0.1,
                                CRITERE='RELATIF',),
                        TYPE_TABLE='TABLE',)

  # Mémoire (Mo) :   635.70 /   635.19 /    44.66 /    33.91 (VmPeak / VmSize / Optimum / Minimum)
  # Fin commande No : 0023   user+syst:        0.00s (syst:        0.00s, elaps:        0.01s)
  # ------------------------------------------------------------------------------------------
Error
--- Fin de l'exécution
EXECUTION_CODE_ASTER_EXIT_10728=0
